<!doctype html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<link type="text/css" href="./css/normalize.css" media="all" rel="stylesheet" />
	<link href="http://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
	<link type="text/css" href="./css/styles.css" media="all" rel="stylesheet" />
	<link type="text/css" href="./css/stickysort.css" media="all" rel="stylesheet" />	
	<script text="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/prefixfree/1.0.7/prefixfree.min.js"></script>
</head>
<body>
		<section class="demo" id="basic">
			<h2>Basic Usage</h2>
			<p>Here is a basic table, populated with data provided by <a href="http://randomuser.me/">Random User Generator (v0.2)</a>. Setting up is easy-peasy:</p>
			<button type="button" class="btn btn-success" id = "show" onclick = "Show()">show</button>
			<button type="button" class="btn btn-danger" id = "hide" onclick = "Hide()">hide</button>
			<br/><br>
			<table>
				<thead>
					<tr>
						<th>Avatar</th>
						<th>Name</th>
						<th>Email</th>
						<th>Contact</th>
						<th>Location</th>
					</tr>
				</thead>
				<tfoot>
					<tr>
						<th>Avatar</th>
						<th>Name</th>
						<th>Email</th>
						<th>Contact</th>
						<th>Location</th>
					</tr>
				</tfoot>
				<tbody>
					<tr><td class="user-avatar"><img src="http://api.randomuser.me/0.2/portraits/women/31.jpg" alt="samantha morgan" title="samantha morgan" /></td><td class="user-name">samantha morgan</td><td class="user-email">samantha.morgan56@example.com</td><td class="user-phone">(369)-227-3751</td><td class="user-location">grapevine, idaho</td></tr>
					<tr><td class="user-avatar"><img src="http://api.randomuser.me/0.2/portraits/men/26.jpg" alt="eli wilson" title="eli wilson" /></td><td class="user-name">eli wilson</td><td class="user-email">eli.wilson12@example.com</td><td class="user-phone">(857)-619-4186</td><td class="user-location">bozeman, new york</td></tr>
					<tr><td class="user-avatar"><img src="http://api.randomuser.me/0.2/portraits/men/13.jpg" alt="brian brown" title="brian brown" /></td><td class="user-name">brian brown</td><td class="user-email">brian.brown96@example.com</td><td class="user-phone">(924)-543-6342</td><td class="user-location">allen, washington</td></tr>
					<tr><td class="user-avatar"><img src="http://api.randomuser.me/0.2/portraits/women/22.jpg" alt="kathy wilson" title="kathy wilson" /></td><td class="user-name">kathy wilson</td><td class="user-email">kathy.wilson59@example.com</td><td class="user-phone">(786)-203-4153</td><td class="user-location">ennis, connecticut</td></tr>
					<tr><td class="user-avatar"><img src="http://api.randomuser.me/0.2/portraits/women/18.jpg" alt="christine ramirez" title="christine ramirez" /></td><td class="user-name">christine ramirez</td><td class="user-email">christine.ramirez72@example.com</td><td class="user-phone">(778)-129-1925</td><td class="user-location">provo, delaware</td></tr>
					<tr><td class="user-avatar"><img src="http://api.randomuser.me/0.2/portraits/men/46.jpg" alt="charles lee" title="charles lee" /></td><td class="user-name">charles lee</td><td class="user-email">charles.lee19@example.com</td><td class="user-phone">(425)-976-3550</td><td class="user-location">akron, virginia</td></tr>
					<tr><td class="user-avatar"><img src="http://api.randomuser.me/0.2/portraits/men/26.jpg" alt="arthur bennett" title="arthur bennett" /></td><td class="user-name">arthur bennett</td><td class="user-email">arthur.bennett10@example.com</td><td class="user-phone">(996)-182-3744</td><td class="user-location">wilmington, michigan</td></tr>
					<tr><td class="user-avatar"><img src="http://api.randomuser.me/0.2/portraits/women/5.jpg" alt="aalivah simmmons" title="aalivah simmmons" /></td><td class="user-name">aalivah simmmons</td><td class="user-email">aalivah.simmmons64@example.com</td><td class="user-phone">(687)-147-6639</td><td class="user-location">duncanville, tennessee</td></tr>
					<tr><td class="user-avatar"><img src="http://api.randomuser.me/0.2/portraits/men/8.jpg" alt="brian russell" title="brian russell" /></td><td class="user-name">brian russell</td><td class="user-email">brian.russell22@example.com</td><td class="user-phone">(600)-224-4416</td><td class="user-location">everett, colorado</td></tr>
					<tr><td class="user-avatar"><img src="http://api.randomuser.me/0.2/portraits/men/5.jpg" alt="dylan russell" title="dylan russell" /></td><td class="user-name">dylan russell</td><td class="user-email">dylan.russell32@example.com</td><td class="user-phone">(439)-363-4363</td><td class="user-location">billings, wisconsin</td></tr>
					<tr><td class="user-avatar"><img src="http://api.randomuser.me/0.2/portraits/women/34.jpg" alt="candice lewis" title="candice lewis" /></td><td class="user-name">candice lewis</td><td class="user-email">candice.lewis76@example.com</td><td class="user-phone">(733)-701-4550</td><td class="user-location">utica, nebraska</td></tr>
					<tr><td class="user-avatar"><img src="http://api.randomuser.me/0.2/portraits/women/10.jpg" alt="kaylee cox" title="kaylee cox" /></td><td class="user-name">kaylee cox</td><td class="user-email">kaylee.cox32@example.com</td><td class="user-phone">(459)-899-9689</td><td class="user-location">rochmond, california</td></tr>
					<tr><td class="user-avatar"><img src="http://api.randomuser.me/0.2/portraits/women/9.jpg" alt="erin miller" title="erin miller" /></td><td class="user-name">erin miller</td><td class="user-email">erin.miller82@example.com</td><td class="user-phone">(570)-814-6244</td><td class="user-location">rochester, indiana</td></tr>
					<tr><td class="user-avatar"><img src="http://api.randomuser.me/0.2/portraits/women/7.jpg" alt="madison brooks" title="madison brooks" /></td><td class="user-name">madison brooks</td><td class="user-email">madison.brooks63@example.com</td><td class="user-phone">(855)-789-4736</td><td class="user-location">richardson, delaware</td></tr>
					<tr><td class="user-avatar"><img src="http://api.randomuser.me/0.2/portraits/women/20.jpg" alt="jennifer evans" title="jennifer evans" /></td><td class="user-name">jennifer evans</td><td class="user-email">jennifer.evans72@example.com</td><td class="user-phone">(214)-201-9140</td><td class="user-location">akron, rhode island</td></tr>
					<tr><td class="user-avatar"><img src="http://api.randomuser.me/0.2/portraits/women/15.jpg" alt="rebecca hughes" title="rebecca hughes" /></td><td class="user-name">rebecca hughes</td><td class="user-email">rebecca.hughes42@example.com</td><td class="user-phone">(736)-650-7095</td><td class="user-location">greensboro, north carolina</td></tr>
					<tr><td class="user-avatar"><img src="http://api.randomuser.me/0.2/portraits/men/26.jpg" alt="samuel taylor" title="samuel taylor" /></td><td class="user-name">samuel taylor</td><td class="user-email">samuel.taylor13@example.com</td><td class="user-phone">(241)-121-6322</td><td class="user-location">dumas, north dakota</td></tr>
					<tr><td class="user-avatar"><img src="http://api.randomuser.me/0.2/portraits/men/43.jpg" alt="joseph walker" title="joseph walker" /></td><td class="user-name">joseph walker</td><td class="user-email">joseph.walker51@example.com</td><td class="user-phone">(736)-940-6308</td><td class="user-location">bueblo, utah</td></tr>
					<tr><td class="user-avatar"><img src="http://api.randomuser.me/0.2/portraits/men/13.jpg" alt="ethan anderson" title="ethan anderson" /></td><td class="user-name">ethan anderson</td><td class="user-email">ethan.anderson65@example.com</td><td class="user-phone">(820)-571-9435</td><td class="user-location">grapevine, iowa</td></tr>
					<tr><td class="user-avatar"><img src="http://api.randomuser.me/0.2/portraits/men/1.jpg" alt="angel barnes" title="angel barnes" /></td><td class="user-name">angel barnes</td><td class="user-email">angel.barnes96@example.com</td><td class="user-phone">(773)-363-7896</td><td class="user-location">belen, vermont</td></tr>
				</tbody>
			</table>

			<table id="tableForJsonData">
            </table>
		</section>	

		<footer>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
		<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-throttle-debounce/1.1/jquery.ba-throttle-debounce.min.js"></script>
		<script type="text/javascript" src="jquery.stickysort.js"></script>
			<script>
				$(function () {
					// We select for tables universally - you can change the selector to target the tables you want
					// Basic table					

					$("#tableForJsonData td").hover(function(){
			      		var i = $(this).index();
			      		var a = $('td:first', $(this).parents('tr')).text();
			      		 
			      		var b =  $('#tableForJsonData tr').eq(0).find('td').eq(i).text();
			     			
			      		$(this).append($("<br><span class=\"label label-info\">("+ a +", "+b+")</span>"));
			      	}, function(){      		
			      		$(this).find("span").remove();
			      		$(this).find("br").remove();			      		
			      	});

					$.getJSON("Scripts/values.json", function (data) {
					        var columns = addColumnHeaders(data);        
					              for (var i = 0; i < data.length; i++) {              
					                  var iteration = i;
					                  var row$ = $('<tr/>');
					                  
					                  for (var colIndex = 0; colIndex < columns.length; colIndex++) {
					                  
					                  var cellValue = data[i][columns[colIndex]];
					                  
					                  if (cellValue == null) { cellValue = ""; }
					                  
					                  //var input = $("<input type = \"checkbox\" id ="+(iteration+1)+" class = \"hideProject\"/>");
					                   //var input = $("<input type= \"checkbox\" id= " +(i+2)+ " class=\"hideProject\" onclick = \"hide(this)\" />");
					                  if(colIndex == 0)
					                  {
					                    row$.append($('<td/>').html(cellValue));
					                  }
					                  else
					                  {
					                    row$.append($('<td/>').html(cellValue));
					                  }
					                  
					                  }
					                  $("#tableForJsonData").append(row$);
					              }
					        
					            transpose();
					            addCheckbox();

					            $("#headerId").css("color", "red");
					            $("#headerId").css("font-weight", "bold");
					            $("#headerId").css("font-size", "20px");
					            $("tr:first-child td").each(function() {
					                $(this).replaceWith('<th>' + $(this).text() + '</th>'); 
					            });
					            var firstHeader = $('#tableForJsonData tr:first');
					            // var tempBlah = '<thead>' + firstHeader[0] + '</thead>';
					            $('table').each(function(){
					                $(this).prepend('<thead></thead>')
					                $(this).find('thead').append($(this).find("tr:eq(0)"));
					            });

					            $('#tableForJsonData').removeAttr( "id" );

					            $('div#basic').removeAttr('id');

					            $('table').stickySort();
					            // $('#tableForJsonData table').stickySort();
					            // $('#tableForJsonData tr:first').remove();
					    });						

						var temp = $('#basic table');
						// debugger;
						// temp[1].removeAttr('id');
						
						$('#basic table').stickySort();
				});

				function addColumnHeaders(list) {
				        var columnSet = [];
				        var header$ = $('<tr/>');
				     
				        for (var i = 0; i < list.length; i++) {
				            var rowHash = list[i];
				            for (var key in rowHash) {
				                if ($.inArray(key, columnSet) == -1) {
				                    columnSet.push(key);
				                    header$.append($('<td/>').html(key));
				                }
				            }
				        }
				        $("#tableForJsonData").append(header$);				     
				        return columnSet;
				}

				function transpose() {          
                          var $this = $("#tableForJsonData");
                          var count = 0;
                          var newrows = [];
                          $this.find("tr").each(function(){
                                                var i = 0;
                                                $(this).find("td").each(function(){
                                                                        i++;
                                                                        if(newrows[i] === undefined) { 
                                                                        
                                                                        newrows[i] = $("<tr></tr>");
                                                                        
                                                                         }
                                                                        newrows[i].append($(this));
                                                                        });
                                                });
                          $this.find("tr").remove();
                          $.each(newrows, function(){
                                 	$this.append(this);                                 
                          });                         
      			}

      			function addCheckbox(){
			    	var option = "<option value=\"0\"> All Projects </option>";
			    	dropdown(option);
			    	var iterator = 0;
			    	var row = $("#tableForJsonData").find("tr:first");
			    	row.attr('id', 'headerId');
			        row.find("td").each(function(cellIndex) {
			        	iterator = iterator + 1;
			        	option = "<option value="+iterator+">" +$(this).text()+"</option>";
			           	dropdown(option);
			        });
			    }

			    function Show() {    	
			    	var selected = $("#project").val();
			    	if(selected == 0)
			    	{
			    		var row = $("#tableForJsonData").find("tr:first");
			        	var iterator = 0;
			              row.find("td").each(function(cellIndex) {
			              	iterator = iterator + 1;
			              	$('td:nth-child(' + iterator + ')').show();
			              });
			    	}
			    	else
			    	{    	 
			    	   $('td:nth-child(' + selected + ')').show();
			    	}
			    }

			   	function Hide(){
			    	var selected = $("#project").val();
			    	if(selected == 0)
			    	{
			    		var row = $("#tableForJsonData").find("tr:first");
			    	    var  iterator = 1;
			          	row.find("td").each(function(cellIndex) {
				        	iterator = iterator + 1;
				        	$('td:nth-child(' + iterator + ')').hide();
			    		});
			    	}
			    	else{			    	
			    		$('td:nth-child(' + selected + ')').hide();
			    	}
			    }

			</script>
		</footer>
</body>
</html>